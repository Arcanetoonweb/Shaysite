<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="cart.css"> <!-- קובץ CSS לעיצוב -->
    <title>סל קניות</title>
</head>
<body>
    <div class="cart-container">
        <h1>סל קניות</h1>
        <div id="cart-container"></div> <!-- כאן ייכנסו המוצרים -->
        <div class="total-price">
            <h2>סכום כולל: ₪<span id="total-price">0.00</span></h2>
        </div>
        <button id="continue-order-button">המשך להזמנה</button>
    </div>

    <script>
        function displayCartItems() {
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            const cartContainer = document.getElementById('cart-container');
            cartContainer.innerHTML = ''; // נקה את התוכן הקיים

            cartItems.forEach((item, index) => {
                if (item) { // בדוק אם המוצר לא null
                    const cartItemDiv = document.createElement('div');
                    cartItemDiv.classList.add('cart-item');
                    cartItemDiv.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                        <div>
                            <h3>${item.name}</h3>
                            <p>מחיר: ₪${item.price.toFixed(2)}</p>
                            <p>כמות: ${item.quantity}</p>
                            <button class="buy-button" onclick="buyItem(${index})">Buy</button>
                            <button class="remove-button" onclick="removeItem(${index})">הסר</button>
                        </div>
                    `;
                    cartContainer.appendChild(cartItemDiv);
                }
            });

            updateTotalPrice(cartItems);
        }

        function removeItem(index) {
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            cartItems.splice(index, 1); // הסרת המוצר מהסל
            localStorage.setItem('cartItems', JSON.stringify(cartItems)); // שמור את הסל המעודכן
            displayCartItems(); // עדכון התצוגה
        }

        function updateTotalPrice(cartItems) {
            const totalPrice = cartItems.reduce((total, item) => total + item.price * item.quantity, 0);
            document.getElementById('total-price').innerText = totalPrice.toFixed(2);
        }

        // פונקציה להמשך הזמנה
        document.getElementById('continue-order-button').addEventListener('click', () => {
            alert('המשך להזמנה!');
            // כאן אפשר להוסיף לוגיקה כדי לעבור לעמוד ההזמנה
        });

        displayCartItems(); // הצגת המוצרים בסל
    </script>
</body>
</html>
